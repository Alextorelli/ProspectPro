%%{init: {"theme": "forest"} }%%
%% accTitle: Intelligent Workspace Flow
%% accDescr: Shows how agents, context hub, MCP fleet, and repo automation interact.
flowchart TD
  subgraph Agents
    A1["Developer Prompt / AI Agent"]
  end
  subgraph ContextHub["Context Hub 🔁"]
    C1["Context Manager (Redis)"]
    C2["Knowledge Index (Docs + Code)"]
  end
  subgraph MCPFleet["MCP Fleet"]
    M1["Prod MCP"]
    M2["Dev MCP"]
    M3["Troubleshooting MCP"]
  end
  subgraph RepoOps["Repo Automation"]
    R1["Git Tasks & Reports"]
    R2["CI / Docs Pipelines"]
  end
  A1 -->|"request"| C1
  C1 -->|"hydrates context"| C2
  C2 -->|"dispatch command"| MCPFleet
  M1 & M2 & M3 -->|"results + diagnostics"| RepoOps
  RepoOps -->|"status + patches"| A1
