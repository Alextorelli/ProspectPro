---
id: context-manager-lifecycle
intent: ContextManager Lifecycle State Diagram (modular, agentic)
context: |
  State diagram showing the lifecycle of the ContextManager, including initialization, update, validation, orchestration, and error handling. Uses shared validation checkpoint snippet.
---
stateDiagram-v2
    [*] --> Initialized
    Initialized --> AwaitingUpdate: wait for contextUpdate
    AwaitingUpdate --> Validating: validate (ZeroFakeData)
    Validating --> Orchestrating: pass
    Validating --> Error: fail
    Orchestrating --> AwaitingUpdate: complete
    Error --> AwaitingUpdate: recover
    Orchestrating --> [*]: shutdown
    Error --> [*]: fatal
    
    state Validating {
      [*] --> SchemaCheck
      SchemaCheck --> ConsistencyCheck
      ConsistencyCheck --> [*]
    }
    
    %% Validation checkpoint
    note right of Validating: Validation & Checkpoints\n- Validate: contextState schema\n- Check: cache/session consistency\n- Log: orchestration diagnostics
