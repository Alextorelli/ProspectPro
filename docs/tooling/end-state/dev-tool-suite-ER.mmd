%%{init: {'theme': 'dark'}}%%
erDiagram
    MCP_CLUSTER }|..|{ AGENT_MODE : routes
    AGENT_MODE ||--o{ COORDINATION_PATTERN : selects
    AGENT_MODE ||--o{ AUTOMATION_SCRIPT : triggers
    AUTOMATION_SCRIPT }o..o{ TELEMETRY_TOOL : emits
    COORDINATION_PATTERN }o..o{ PARTICIPANT : activates

    MCP_CLUSTER {
        string name PK
        string tier
        string transport
    }

    AGENT_MODE {
        string modeKey PK
        string primaryFocus
        string defaultParticipants
    }

    COORDINATION_PATTERN {
        string pattern PK
        string cadence
        string escalationRule
    }

    PARTICIPANT {
        string handle PK
        string specialization
        boolean optional
    }

    AUTOMATION_SCRIPT {
        string script PK
        string path
        string output
    }

    TELEMETRY_TOOL {
        string tool PK
        string collector
        string reportTarget
    }

    MCP_CLUSTER ||--|| DEV_CLUSTER : instance
    MCP_CLUSTER ||--|| TEST_CLUSTER : instance
    MCP_CLUSTER ||--|| STAGE_CLUSTER : instance
    MCP_CLUSTER ||--|| PROD_CLUSTER : instance

    AGENT_MODE ||--|| DEBUG_MODE : instance
    AGENT_MODE ||--|| FEATURE_MODE : instance
    AGENT_MODE ||--|| SUPPORT_MODE : instance
    AGENT_MODE ||--|| OPTIMIZE_MODE : instance
    AGENT_MODE ||--|| SECURITY_MODE : instance

    COORDINATION_PATTERN ||--|| SINGLE_EXECUTION : instance
    COORDINATION_PATTERN ||--|| CHAIN_EXECUTION : instance
    COORDINATION_PATTERN ||--|| SWARM_EXECUTION : instance
    COORDINATION_PATTERN ||--|| ESCALATION_EXECUTION : instance

    PARTICIPANT ||--|| UX_PARTICIPANT : instance
    PARTICIPANT ||--|| PLATFORM_PARTICIPANT : instance
    PARTICIPANT ||--|| DEVOPS_PARTICIPANT : instance
    PARTICIPANT ||--|| SECOPS_PARTICIPANT : instance
    PARTICIPANT ||--|| INTEGRATIONS_PARTICIPANT : instance

    AUTOMATION_SCRIPT ||--|| SUPABASE_PULL_LOGS : instance
    AUTOMATION_SCRIPT ||--|| CONTEXT_SNAPSHOT : instance
    AUTOMATION_SCRIPT ||--|| VERCEL_STATUS_CHECK : instance
    AUTOMATION_SCRIPT ||--|| CAPTURE_API_TRACE : instance
    AUTOMATION_SCRIPT ||--|| COMPARE_CAMPAIGN_COSTS : instance
    AUTOMATION_SCRIPT ||--|| PREDICT_CAMPAIGN_ROI : instance

    TELEMETRY_TOOL ||--|| OTEL_COLLECTOR : instance
    TELEMETRY_TOOL ||--|| SUPABASE_LOGS : instance
    TELEMETRY_TOOL ||--|| CONTEXT_SNAPSHOT_REPORT : instance
