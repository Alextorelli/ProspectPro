%%{init: {'theme': 'dark'}}%%
    title Container diagram for ProspectPro AI-Powered Development Ecosystem

    Person(dev, "Solo Developer", "Alex - Technical entrepreneur", "Orchestrates AI agents and dev tools")

    Container_Boundary(chat_ui, "VS Code Chat Surface") {
        Container(chat_modes, "Chat Modes Matrix", "Markdown", "Maps developer intent across @debug, @deliver, @support, @optimize, @security")
        Container(active_participant, "Active Chat Participant", "TypeScript", "Resolves a single participant per execution")
    }

    Container_Boundary(environment_layer, "Primary MCP Environment Router") {
        Container(mcp_router, "Tiered MCP Router", "Node.js", "Distributes work across production, development, and troubleshooting tiers")
    }

    Container_Boundary(mcp_tools, "MCP Tool Stack") {
        Container(supabase_ops, "Supabase Operations Suite", "Node.js", "Edge diagnostics, auth enforcement, migration verification")
        Container(observability_suite, "Observability System", "Node.js", "Telemetry streaming, tracing, alert routing")
        Container(github_automation, "GitHub Automation Hub", "Node.js", "CI/CD orchestration, workflow guards")
    }

    Container_Boundary(automation_layer, "Automation Mesh") {
        Container(automation_mesh, "Automation Orchestrator", "Bash, Node.js", "Supabase log pulls, Vercel status checks, context snapshots")
    }

    Container_Boundary(artifacts, "Artifacts & Outputs") {
        Container(artifact_vault, "Artifact Vault", "Markdown, JSON", "Deployment packages, diagnostics, compliance archives")
    }

    Container_Boundary(knowledge_layer, "Context Library") {
        Container(context_library, "Context Library", "Markdown, JSON", "Curated automation outputs and playbooks")
    }

    Rel(dev, chat_modes, "Selects delivery focus via chat UI", "VS Code chat")
    Rel(chat_modes, active_participant, "Activates participant for execution", "Intent mapping")
    Rel(active_participant, mcp_router, "Routes task to tiered MCP", "JSON-RPC")
    Rel(mcp_router, supabase_ops, "Dispatches backend operations", "JSON-RPC")
    Rel(mcp_router, observability_suite, "Requests telemetry insights", "JSON-RPC")
    Rel(mcp_router, github_automation, "Triggers workflow guards", "JSON-RPC")
    Rel(supabase_ops, automation_mesh, "Initiates Supabase diagnostics", "CLI orchestration")
    Rel(observability_suite, automation_mesh, "Streams deployment telemetry", "Event hook")
    Rel(github_automation, automation_mesh, "Executes environment scripts", "CLI wrapper")
    Rel(automation_mesh, artifact_vault, "Publishes validated artifacts", "Reports & packages")
    Rel(artifact_vault, context_library, "Archives into context library", "Knowledge capture")