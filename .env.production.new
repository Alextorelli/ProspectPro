# ProspectPro Production Environment - Updated Security Configuration
# Date: October 3, 2025
# Status: Updated for new Supabase API key format (legacy keys disabled 2025-09-15)

# ================================
# SUPABASE CONNECTION (New Format - Post 2025-09-15)
# ================================
VITE_SUPABASE_URL=https://sriycekxdqnesdsgwiuc.supabase.co

# NEW FORMAT: Replace legacy anon key with publishable key
# The legacy anon key was disabled on 2025-09-15
# Get new keys from: Supabase Dashboard → Settings → API → "New API Keys" section
VITE_SUPABASE_ANON_KEY=sb_publishable_GaGU6ZiyiO6ncO7kU2qAvA_SFuCyYaM


# Service role key also needs to be updated to new secret key format
SUPABASE_SERVICE_ROLE_KEY=sb_secret_bY8n_a7-hP0Lxd9dPT_efg_3WzpnXN_

# Edge Functions URL remains the same
VITE_EDGE_FUNCTIONS_URL=https://sriycekxdqnesdsgwiuc.supabase.co/functions/v1
VITE_AUTH_REDIRECT_URL=https://prospectpro.appsmithery.co/

# ================================
# FRONTEND ENVIRONMENT VARIABLES
# ================================
# These are injected at build time for the React app
VITE_APP_NAME=ProspectPro
VITE_APP_VERSION=4.2.0
VITE_ENVIRONMENT=production

# ================================
# PRODUCTION SETTINGS
# ================================
NODE_ENV=production
ALLOW_DEGRADED_START=false

# Budget Controls
DAILY_BUDGET_LIMIT=100.00
DEFAULT_BUDGET_LIMIT=25.00
PER_LEAD_COST_LIMIT=2.00
COST_ALERT_THRESHOLD=80.00

# Quality Thresholds
MIN_CONFIDENCE_SCORE=85
PRE_VALIDATION_THRESHOLD=75
EXPORT_CONFIDENCE_THRESHOLD=90

# Performance
REQUEST_TIMEOUT=30000
REQUEST_DELAY=500
MAX_CONCURRENT_REQUESTS=10
BATCH_SIZE=25
CACHE_TTL_SECONDS=3600

# Rate Limiting
GOOGLE_PLACES_RPM=1000
HUNTER_IO_RPM=100
NEVERBOUNCE_RPM=300
RATE_LIMIT_WINDOW=60000

# Monitoring
ENABLE_PROMETHEUS_METRICS=true
ENABLE_PERFORMANCE_LOGGING=true
ENABLE_COST_TRACKING=true
ENABLE_ERROR_REPORTING=true
LOG_LEVEL=info

# Caching & Performance
ENABLE_TTL_CACHE=true
ENABLE_BATCH_PROCESSING=true
ENABLE_SMART_ROUTING=true
ENABLE_CIRCUIT_BREAKER=true

# Security
ENABLE_REQUEST_VALIDATION=true
ENABLE_RATE_LIMITING=true
REQUIRE_API_AUTHENTICATION=true

# Database
ENABLE_DATABASE_CONNECTION_POOLING=true
ENABLE_GRACEFUL_SHUTDOWN=true
ENABLE_HEALTH_CHECKS=true

# Deployment
BIND_ADDRESS=0.0.0.0
GRACEFUL_SHUTDOWN_TIMEOUT=30000
HEALTH_CHECK_INTERVAL=30000
DATABASE_CONNECTION_TIMEOUT=5000
API_CLIENT_TIMEOUT=15000
WEBHOOK_TIMEOUT=10000

# ================================
# MIGRATION NOTES
# ================================
# CRITICAL: Legacy API keys were disabled on 2025-09-15
# 
# Required Actions:
# 1. Go to Supabase Dashboard → Settings → API
# 2. Find the "New API Keys" section (not legacy keys)
# 3. Copy the new "publishable key" → VITE_SUPABASE_ANON_KEY
# 4. Copy the new "secret key" → SUPABASE_SERVICE_ROLE_KEY
# 5. Update all frontend deployments with new publishable key
# 6. Update all Edge Functions with new secret key
# 7. Test database access with new keys
#
# Security Benefits:
# - Enhanced JWT token security
# - Improved rate limiting
# - Better audit trails
# - Automatic key rotation support