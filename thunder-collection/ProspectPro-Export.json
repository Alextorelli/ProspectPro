{
  "clientName": "Thunder Client",
  "collectionName": "ProspectPro - Export Tests",
  "collectionId": "prospectpro-export",
  "dateExported": "2025-10-17T00:00:00.000Z",
  "version": "1.2",
  "folders": [
    {
      "id": "export-success",
      "name": "Export Success Cases",
      "containerId": "",
      "created": "2025-10-17T00:00:00.000Z",
      "sortNum": 10000
    },
    {
      "id": "export-failures",
      "name": "Export Failure Modes",
      "containerId": "",
      "created": "2025-10-17T00:00:00.000Z",
      "sortNum": 20000
    }
  ],
  "requests": [
    {
      "id": "export-csv-success",
      "name": "✅ CSV Export - Authorized User",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 10000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{SUPABASE_SESSION_JWT}}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"{{TEST_CAMPAIGN_ID}}\",\n  \"format\": \"csv\",\n  \"sessionUserId\": \"thunder_test_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "200"
        },
        {
          "type": "header",
          "value": "Content-Type",
          "action": "contains text/csv"
        },
        {
          "type": "header",
          "value": "Content-Disposition",
          "action": "contains attachment"
        }
      ],
      "containerId": "export-success"
    },
    {
      "id": "export-json-success",
      "name": "✅ JSON Export - Authorized User",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 20000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{SUPABASE_SESSION_JWT}}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"{{TEST_CAMPAIGN_ID}}\",\n  \"format\": \"json\",\n  \"sessionUserId\": \"thunder_test_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "200"
        },
        {
          "type": "header",
          "value": "Content-Type",
          "action": "contains application/json"
        },
        {
          "type": "json-query",
          "value": "$.leads",
          "action": "istype array"
        }
      ],
      "containerId": "export-success"
    },
    {
      "id": "export-unauthorized-user",
      "name": "❌ Unauthorized User (Different User)",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 30000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{SUPABASE_SESSION_JWT_ALT_USER}}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"{{TEST_CAMPAIGN_ID}}\",\n  \"format\": \"csv\",\n  \"sessionUserId\": \"different_user_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "403"
        },
        {
          "type": "json-query",
          "value": "$.error",
          "action": "contains unauthorized"
        }
      ],
      "containerId": "export-failures"
    },
    {
      "id": "export-missing-campaign",
      "name": "❌ Campaign Not Found",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 40000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{SUPABASE_SESSION_JWT}}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"nonexistent_campaign_12345\",\n  \"format\": \"csv\",\n  \"sessionUserId\": \"thunder_test_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "404"
        },
        {
          "type": "json-query",
          "value": "$.error",
          "action": "contains not found"
        }
      ],
      "containerId": "export-failures"
    },
    {
      "id": "export-no-auth",
      "name": "❌ No Authentication Token",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 50000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"{{TEST_CAMPAIGN_ID}}\",\n  \"format\": \"csv\",\n  \"sessionUserId\": \"thunder_test_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "401"
        },
        {
          "type": "json-query",
          "value": "$.error",
          "action": "contains Unauthorized"
        }
      ],
      "containerId": "export-failures"
    },
    {
      "id": "export-invalid-format",
      "name": "❌ Invalid Export Format",
      "url": "{{SUPABASE_URL}}/functions/v1/campaign-export-user-aware",
      "method": "POST",
      "sortNum": 60000,
      "created": "2025-10-17T00:00:00.000Z",
      "modified": "2025-10-17T00:00:00.000Z",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{SUPABASE_SESSION_JWT}}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"campaignId\": \"{{TEST_CAMPAIGN_ID}}\",\n  \"format\": \"invalid_format_xyz\",\n  \"sessionUserId\": \"thunder_test_{{$timestamp}}\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "value": "400"
        },
        {
          "type": "json-query",
          "value": "$.error",
          "action": "contains format"
        }
      ],
      "containerId": "export-failures"
    }
  ],
  "settings": {
    "options": {
      "baseUrl": ""
    },
    "envId": "prospectpro-production"
  }
}
