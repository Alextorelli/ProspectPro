{
    "version": "1.1",
    "description": "ProspectPro v4.3 MCP Server Configuration - Tier-Aware Background Discovery & Supabase CLI Guard",
    "servers": {
        "prospectpro-production": {
            "autoStart": true,
            "lazyLoad": true,
            "maxMemory": "192MB",
            "priority": "high",
            "description": "Production monitoring for tier-aware background discovery, enrichment, and session-enforced auth (28 tools)",
            "tools": [
                "monitor_api_performance",
                "analyze_database_metrics",
                "check_edge_function_health",
                "track_api_costs",
                "monitor_supabase_usage",
                "track_user_sessions",
                "monitor_authentication",
                "analyze_campaign_ownership"
            ]
        },
        "prospectpro-development": {
            "autoStart": false,
            "onDemand": true,
            "maxMemory": "96MB",
            "priority": "medium",
            "description": "Development tools for background discovery, census targeting, enrichment, and session token workflows",
            "activationKeywords": [
                "develop",
                "integrate",
                "new api",
                "test integration",
                "user auth",
                "session management"
            ]
        },
        "prospectpro-troubleshooting": {
            "autoStart": false,
            "onDemand": true,
            "maxMemory": "96MB",
            "priority": "medium",
            "description": "Debugging tools for background jobs, Supabase auth sessions, and enrichment pipelines",
            "activationKeywords": [
                "debug",
                "error",
                "fix",
                "troubleshoot",
                "404",
                "500",
                "auth error",
                "jwt",
                "session"
            ]
        }
    },
    "globalSettings": {
        "maxConcurrentServers": 2,
        "memoryThreshold": "384MB",
        "smartLoading": true,
        "contextOptimization": true
    },
    "contextFilters": {
        "allowedExtensions": [
            ".ts",
            ".js",
            ".json",
            ".md",
            ".sql"
        ],
        "excludedPaths": [
            "archive/**",
            "node_modules/**",
            ".deno_lsp/**",
            "logs/**",
            "dist/**"
        ],
        "maxContextLength": 200,
        "maxFileSize": 50000
    },
    "costOptimization": {
        "enabled": true,
        "tokenReduction": 38,
        "cacheResponses": true,
        "smartContext": true,
        "quickCommands": {
            "run prod mcp": "cd /workspaces/ProspectPro/mcp-servers && npm run start:production",
            "ensure supabase session": "source scripts/ensure-supabase-cli-session.sh",
            "prepare edge auth env": "source scripts/setup-edge-auth-env.sh",
            "stop mcp": "./scripts/stop-mcp.sh",
            "deploy discovery background": "source scripts/ensure-supabase-cli-session.sh && source scripts/lib/supabase_cli_helpers.sh && prospectpro_supabase_cli functions deploy business-discovery-background",
            "deploy orchestrator": "source scripts/ensure-supabase-cli-session.sh && source scripts/lib/supabase_cli_helpers.sh && prospectpro_supabase_cli functions deploy enrichment-orchestrator",
            "deploy export": "source scripts/ensure-supabase-cli-session.sh && source scripts/lib/supabase_cli_helpers.sh && prospectpro_supabase_cli functions deploy campaign-export-user-aware",
            "check background logs": "source scripts/ensure-supabase-cli-session.sh && echo 'Open Supabase dashboard → Edge Functions → business-discovery-background → Logs'",
            "push supabase migrations": "source scripts/ensure-supabase-cli-session.sh && source scripts/lib/supabase_cli_helpers.sh && prospectpro_supabase_cli db push --linked",
            "list supabase migrations": "source scripts/ensure-supabase-cli-session.sh && source scripts/lib/supabase_cli_helpers.sh && prospectpro_supabase_cli migration list",
            "test background job": "curl -sS -X POST \"$SUPABASE_URL/functions/v1/business-discovery-background\" -H \"Authorization: Bearer $SUPABASE_SESSION_JWT\" -H \"apikey: $SUPABASE_PUBLISHABLE_KEY\" -H \"Content-Type: application/json\" -d '{\"businessType\":\"coffee shop\",\"location\":\"Seattle, WA\",\"maxResults\":1,\"tierKey\":\"PROFESSIONAL\"}'",
            "test export": "curl -sS -X POST \"$SUPABASE_URL/functions/v1/campaign-export-user-aware\" -H \"Authorization: Bearer $SUPABASE_SESSION_JWT\" -H \"apikey: $SUPABASE_PUBLISHABLE_KEY\" -H \"Content-Type: application/json\" -d '{\"campaignId\":\"test\",\"format\":\"csv\"}'",
            "test auth diagnostics": "curl -sS -X POST \"$SUPABASE_URL/functions/v1/auth-diagnostics\" -H \"Authorization: Bearer $SUPABASE_SESSION_JWT\" -H \"apikey: $SUPABASE_PUBLISHABLE_KEY\" -H \"Content-Type: application/json\" -d '{\"echo\": true}'",
            "refresh codebase index": "npm run codebase:index",
            "compare auth patterns": "./scripts/test-auth-patterns.sh \"$SUPABASE_SESSION_JWT\"",
            "rebuild frontend": "npm install && npm run build",
            "verify repo root": "git rev-parse --show-toplevel && pwd",
            "pull vercel env": "vercel env pull .env.vercel"
        }
    },
    "userAwareFeatures": {
        "enabled": true,
        "sessionTracking": true,
        "authenticationMonitoring": true,
        "campaignOwnershipTracking": true,
        "dataIsolationValidation": true
    }
}