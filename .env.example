# ProspectPro - Production Configuration Template
# NOTE: All secrets are injected at build/runtime via GitHub Actions and Supabase Vault
# This file documents the expected environment structure for production deployments

# ================================
# ENVIRONMENT CONFIGURATION
# ================================
NODE_ENV=production
PORT=3100
ALLOW_DEGRADED_START=false


# ================================
# SUPABASE CONNECTION (Injected via GitHub Actions)
# ================================
# These values are automatically injected from GitHub Secrets during CI/CD:
# - SUPABASE_URL: Project URL from GitHub repository secrets
# - SUPABASE_SECRET_KEY: Service role key from GitHub repository secrets
# - DATABASE_URL: Postgres connection string for Drizzle ORM (optional, for backend tooling)
# - SUPABASE_DB_URL: Alternate Postgres connection string for Drizzle ORM (optional)
# 
# All API keys are loaded from Supabase Vault at runtime using these credentials
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SECRET_KEY=your_service_role_key_here
DATABASE_URL=postgres://user:password@host:5432/dbname
SUPABASE_DB_URL=postgres://user:password@host:5432/dbname

# Frontend OAuth Redirect
VITE_AUTH_REDIRECT_URL=https://your-frontend-domain.example.com/auth/callback

# ================================
# PRODUCTION PERFORMANCE SETTINGS
# ================================

# Budget Controls (USD) - Production Limits
DAILY_BUDGET_LIMIT=100.00
DEFAULT_BUDGET_LIMIT=25.00
PER_LEAD_COST_LIMIT=2.00
COST_ALERT_THRESHOLD=80.00

# Quality Thresholds - Production Standards
MIN_CONFIDENCE_SCORE=85
PRE_VALIDATION_THRESHOLD=75
EXPORT_CONFIDENCE_THRESHOLD=90

# Performance Optimization
REQUEST_TIMEOUT=30000
REQUEST_DELAY=500
MAX_CONCURRENT_REQUESTS=10
BATCH_SIZE=25
CACHE_TTL_SECONDS=3600

# Rate Limiting - Production Rates
GOOGLE_PLACES_RPM=1000
HUNTER_IO_RPM=100
NEVERBOUNCE_RPM=300
RATE_LIMIT_WINDOW=60000

# ================================
# PRODUCTION FEATURES
# ================================

# Monitoring & Logging
ENABLE_PROMETHEUS_METRICS=true
ENABLE_PERFORMANCE_LOGGING=true
ENABLE_COST_TRACKING=true
ENABLE_ERROR_REPORTING=true
LOG_LEVEL=info

# Caching & Performance
ENABLE_TTL_CACHE=true
ENABLE_BATCH_PROCESSING=true
ENABLE_SMART_ROUTING=true
ENABLE_CIRCUIT_BREAKER=true

# Security Features
ENABLE_REQUEST_VALIDATION=true
ENABLE_RATE_LIMITING=true
REQUIRE_API_AUTHENTICATION=true

# Production Optimizations
ENABLE_DATABASE_CONNECTION_POOLING=true
ENABLE_GRACEFUL_SHUTDOWN=true
ENABLE_HEALTH_CHECKS=true

# ================================
# RUNTIME API KEYS (Loaded from Supabase Vault)
# ================================
# These keys are automatically loaded from Supabase Vault at server startup:
# - GOOGLE_PLACES_API_KEY: For business discovery
# - HUNTER_IO_API_KEY: For email discovery
# - NEVERBOUNCE_API_KEY: For email validation
# - APOLLO_API_KEY: For lead enrichment
# - FOURSQUARE_SERVICE_API_KEY: For location verification
# - SCRAPINGDOG_API_KEY: For website scraping
# - PERSONAL_ACCESS_TOKEN: For admin API access

# ================================
# DEPLOYMENT SETTINGS
# ================================

# Network Binding
BIND_ADDRESS=0.0.0.0
GRACEFUL_SHUTDOWN_TIMEOUT=30000
HEALTH_CHECK_INTERVAL=30000

# External Service Timeouts
DATABASE_CONNECTION_TIMEOUT=5000
API_CLIENT_TIMEOUT=15000
WEBHOOK_TIMEOUT=10000

# ================================
# CI/CD CONFIGURATION NOTES
# ================================
# 
# Production Deployment Process:
# 1. GitHub Actions reads SUPABASE_URL and SUPABASE_SECRET_KEY from repository secrets
# 2. Generates .env file with these values during build
# 3. App starts and loads additional API keys from Supabase Vault
# 4. All secrets remain secure and never appear in repository code
#
# Local Development:
# 1. Copy this file to .env
# 2. Add real SUPABASE_URL and SUPABASE_SECRET_KEY values
# 3. Ensure Supabase Vault contains all required API keys
# 4. Run: npm run dev
#
# Security Notes:
# - Never commit real secrets to this file
# - All production secrets are managed via GitHub repository secrets
# - API keys are stored securely in Supabase Vault
# - Environment variables are injected at build/runtime only