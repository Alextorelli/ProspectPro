%%{init: { "theme": "dark", "fontFamily": "Inter", "flowchart": { "htmlLabels": false, "curve": "monotoneX" } }}%%
flowchart TB
    subgraph ENV["🛠️ Development Environment"]
   
    subgraph ORCH["🧠 Orchestration Layer"]
        direction LR
        CM["🗂️ Context Manager"]
        EM["🌍 Environment Manager"]
    end

    EM --> AO
    CM --> AO

    subgraph AGENTS["👥 Agent Workflows"]
        direction LR
                AO["🤖 Agent Orchestrator"]
        subgraph DEV_FLOW["💻 Dev Workflow Agent"]
            direction TB
            DEV_START["🚀 Start"]
            DEV_MEM["🧠 Load Context<br/>80 entries"]
            DEV_MCP["🌐 MCP Mesh<br/>Code · Test · Data"]
            DEV_SIG["📡 Build Signals<br/>Test Results"]
            DEV_SAVE["💾 Checkpoint<br/>Auto-save"]
            DEV_END["✅ Complete"]
            
            DEV_START --> DEV_MEM
            DEV_MEM --> DEV_MCP
            DEV_MCP --> DEV_SIG
            DEV_SIG --> DEV_SAVE
            DEV_SAVE --> DEV_END
            DEV_END -.-> DEV_START
        end

        subgraph ARCH_FLOW["🏗️ System Architect Agent"]
            direction TB
            ARCH_START["🚀 Start"]
            ARCH_MEM["🧠 Load Context<br/>Unlimited LTM"]
            ARCH_MCP["🌐 MCP Mesh<br/>Research · Design"]
            ARCH_SIG["📐 Design Artifacts<br/>Decisions"]
            ARCH_END["✅ Complete"]
            
            ARCH_START --> ARCH_MEM
            ARCH_MEM --> ARCH_MCP
            ARCH_MCP --> ARCH_SIG
            ARCH_SIG --> ARCH_SAVE
            ARCH_SAVE --> ARCH_END
            ARCH_END -.-> ARCH_START
        end
    end
end

    AO -- "Launch Build" --> DEV_START
    AO -- "Design System" --> ARCH_START

    subgraph SHARED["🔄 Shared Infrastructure"]
        direction LR
        MEMORY["🧠 Memory Store<br/>Scratchpad · LTM · Checkpoints"]
        MCP["🌐 Full MCP Access<br/>Supabase · GitHub · Playwright<br/>Context7 · Utility"]
    end



    AGENTS <==> SHARED
    ORCH <--> SHARED

    style ENV fill:#065f46,stroke:#10b981,stroke-width:2px
    style ORCH fill:#1a1a2a,stroke:#a78bfa,stroke-width:2px
    style DEV_FLOW fill:#1a3a1a,stroke:#4ade80,stroke-width:2px
    style ARCH_FLOW fill:#1a2a4a,stroke:#60a5fa,stroke-width:2px
    style SHARED fill:#1a1a2a,stroke:#a78bfa,stroke-width:2px
    style DEV_START fill:#2d5016,stroke:#4ade80,stroke-width:3px
    style ARCH_START fill:#1e3a5f,stroke:#60a5fa,stroke-width:3px
    style DEV_END fill:#2d5016,stroke:#4ade80,stroke-width:3px
    style ARCH_END fill:#1e3a5f,stroke:#60a5fa,stroke-width:3px
